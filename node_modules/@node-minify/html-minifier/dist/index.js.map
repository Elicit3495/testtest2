{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/*!\n * node-minify\n * Copyright(c) 2011-2023 Rodolphe Stoclin\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nimport minifier from 'html-minifier';\nimport { utils } from '@node-minify/utils';\nimport { MinifierOptions } from '@node-minify/types';\n\n/**\n * Module variables.\n */\nconst HTMLMinifier = minifier.minify;\nconst defaultOptions = {\n  collapseBooleanAttributes: true,\n  collapseInlineTagWhitespace: true,\n  collapseWhitespace: true,\n  minifyCSS: true,\n  minifyJS: true,\n  removeAttributeQuotes: true,\n  removeCDATASectionsFromCDATA: true,\n  removeComments: true,\n  removeCommentsFromCDATA: true,\n  removeEmptyAttributes: true,\n  removeOptionalTags: true,\n  removeRedundantAttributes: true,\n  removeScriptTypeAttributes: true,\n  removeStyleLinkTypeAttributes: true,\n  useShortDoctype: true\n};\n\n/**\n * Run html-minifier.\n *\n * @param {Object} settings\n * @param {String} content\n * @param {Function} callback\n */\nconst minifyHTMLMinifier = ({ settings, content, callback, index }: MinifierOptions) => {\n  const options = Object.assign({}, defaultOptions, settings?.options);\n  const contentMinified = HTMLMinifier(content ?? '', options);\n  if (settings && !settings.content && settings.output) {\n    settings.output && utils.writeFile({ file: settings.output, content: contentMinified, index });\n  }\n  if (callback) {\n    return callback(null, contentMinified);\n  }\n  return contentMinified;\n};\n\n/**\n * Expose `minifyHTMLMinifier()`.\n */\nminifyHTMLMinifier.default = minifyHTMLMinifier;\nexport = minifyHTMLMinifier;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AASA,2BAAqB;AACrB,mBAAsB;AAMtB,IAAM,eAAe,qBAAAA,QAAS;AAC9B,IAAM,iBAAiB;AAAA,EACrB,2BAA2B;AAAA,EAC3B,6BAA6B;AAAA,EAC7B,oBAAoB;AAAA,EACpB,WAAW;AAAA,EACX,UAAU;AAAA,EACV,uBAAuB;AAAA,EACvB,8BAA8B;AAAA,EAC9B,gBAAgB;AAAA,EAChB,yBAAyB;AAAA,EACzB,uBAAuB;AAAA,EACvB,oBAAoB;AAAA,EACpB,2BAA2B;AAAA,EAC3B,4BAA4B;AAAA,EAC5B,+BAA+B;AAAA,EAC/B,iBAAiB;AACnB;AASA,IAAM,qBAAqB,CAAC,EAAE,UAAU,SAAS,UAAU,MAAM,MAAuB;AACtF,QAAM,UAAU,OAAO,OAAO,CAAC,GAAG,gBAAgB,UAAU,OAAO;AACnE,QAAM,kBAAkB,aAAa,WAAW,IAAI,OAAO;AAC3D,MAAI,YAAY,CAAC,SAAS,WAAW,SAAS,QAAQ;AACpD,aAAS,UAAU,mBAAM,UAAU,EAAE,MAAM,SAAS,QAAQ,SAAS,iBAAiB,MAAM,CAAC;AAAA,EAC/F;AACA,MAAI,UAAU;AACZ,WAAO,SAAS,MAAM,eAAe;AAAA,EACvC;AACA,SAAO;AACT;AAKA,mBAAmB,UAAU;AAC7B,iBAAS;","names":["minifier"]}